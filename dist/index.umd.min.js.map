{"version":3,"file":"index.umd.min.js","sources":["../src/lib/shared.js","../src/lib/events.js","../src/lib/api.js","../src/lib/defaults.js","../src/lib/markup.js","../src/lib/styles.js","../src/lib/setup.js","../src/lib/index.js"],"sourcesContent":["const _shared = {\n  pullStartY: null,\n  pullMoveY: null,\n  handlers: [],\n  styleEl: null,\n  events: null,\n  dist: 0,\n  state: 'pending',\n  timeout: null,\n  distResisted: 0,\n  supportsPassive: false,\n  supportsPointerEvents: typeof window !== 'undefined' && !!window.PointerEvent,\n};\n\ntry {\n  window.addEventListener('test', null, {\n    get passive() { // eslint-disable-line getter-return\n      _shared.supportsPassive = true;\n    },\n  });\n} catch (e) {\n  // do nothing\n}\n\nexport default _shared;\n","import _ptr from './api';\nimport _shared from './shared';\n\nlet _timeout;\n\nconst screenY = function screenY(event) {\n  if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n    return event.screenY;\n  }\n  return event.touches[0].screenY;\n};\n\nexport default () => {\n  let _el;\n\n  function _onTouchStart(e) {\n    // here, we must pick a handler first, and then append their html/css on the DOM\n    const target = _shared.handlers.filter(h => h.contains(e.target))[0];\n\n    _shared.enable = !!target;\n\n    if (target && _shared.state === 'pending') {\n      _el = _ptr.setupDOM(target);\n\n      if (target.shouldPullToRefresh()) {\n        _shared.pullStartY = screenY(e);\n      }\n\n      clearTimeout(_shared.timeout);\n\n      _ptr.update(target);\n    }\n  }\n\n  function _onTouchMove(e) {\n    if (!(_el && _el.ptrElement && _shared.enable)) {\n      return;\n    }\n\n    if (!_shared.pullStartY) {\n      if (_el.shouldPullToRefresh()) {\n        _shared.pullStartY = screenY(e);\n      }\n    } else {\n      _shared.pullMoveY = screenY(e);\n    }\n\n    if (_shared.state === 'refreshing') {\n      if (e.cancelable && _el.shouldPullToRefresh() && _shared.pullStartY < _shared.pullMoveY) {\n        e.preventDefault();\n      }\n\n      return;\n    }\n\n    if (_shared.state === 'pending') {\n      _el.ptrElement.classList.add(`${_el.classPrefix}pull`);\n      _shared.state = 'pulling';\n      _ptr.update(_el);\n    }\n\n    if (_shared.pullStartY && _shared.pullMoveY) {\n      _shared.dist = _shared.pullMoveY - _shared.pullStartY;\n    }\n\n    _shared.distExtra = _shared.dist - _el.distIgnore;\n\n    if (_shared.distExtra > 0) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n\n      _el.ptrElement.style[_el.cssProp] = `${_shared.distResisted}px`;\n      _el.onDistance({ dist: _shared.distResisted, ptrElement: _el.ptrElement, distThreshold: _el.distThreshold });\n\n      _shared.distResisted = _el.distanceResistedFunction({\n        distExtra: _shared.distExtra,\n        distThreshold: _el.distThreshold,\n      });\n\n      if (_shared.state === 'pulling' && _shared.distResisted > _el.distThreshold) {\n        _el.onReleasingWhilePulling();\n        _el.ptrElement.classList.add(`${_el.classPrefix}release`);\n        _shared.state = 'releasing';\n        _ptr.update(_el);\n      }\n\n      if (_shared.state === 'releasing' && _shared.distResisted < _el.distThreshold) {\n        _el.ptrElement.classList.remove(`${_el.classPrefix}release`);\n        _shared.state = 'pulling';\n        _ptr.update(_el);\n      }\n    } else {\n      _el.ptrElement.style[_el.cssProp] = '0px';\n      _el.onDistance({ dist: 0, ptrElement: _el.ptrElement, distThreshold: _el.distThreshold });\n    }\n  }\n\n  function _onTouchEnd() {\n    if (!(_el && _el.ptrElement && _shared.enable)) {\n      return;\n    }\n\n    // wait 1/2 sec before unmounting...\n    clearTimeout(_timeout);\n    _timeout = setTimeout(() => {\n      if (_el && _el.ptrElement && _shared.state === 'pending') {\n        _ptr.onReset(_el);\n      }\n    }, 500);\n\n    if (_shared.state === 'releasing' && _shared.distResisted > _el.distThreshold) {\n      _shared.state = 'refreshing';\n\n      // Remove the pull class (which has transition: none) and force a reflow\n      // before setting the style. This ensures the browser enables transitions\n      // before animating back to  dist reload. The class removal below is still needed\n      // for the refreshing branch.\n      _el.ptrElement.classList.remove(`${_el.classPrefix}pull`);\n      _el.ptrElement.offsetHeight; // force reflow\n      _el.ptrElement.style[_el.cssProp] = `${_el.distReload}px`;\n      _el.onDistance({ dist: _el.distReload, ptrElement: _el.ptrElement, distThreshold: _el.distThreshold });\n\n      _el.ptrElement.classList.add(`${_el.classPrefix}refresh`);\n\n      _shared.timeout = setTimeout(() => {\n        const retval = _el.onRefresh(() => _ptr.onReset(_el));\n\n        if (retval && typeof retval.then === 'function') {\n          retval.then(() => _ptr.onReset(_el));\n        }\n\n        if (!retval && !_el.onRefresh.length) {\n          _ptr.onReset(_el);\n        }\n      }, _el.refreshTimeout);\n    } else {\n      if (_shared.state === 'refreshing') {\n        return;\n      }\n\n      // Remove the pull class (which has transition: none) and force a reflow\n      // before setting the style. This ensures the browser enables transitions\n      // before animating back to 0px. The class removal below is still needed\n      // for the refreshing branch.\n      _el.ptrElement.classList.remove(`${_el.classPrefix}pull`);\n      _el.ptrElement.offsetHeight; // force reflow\n\n      _el.ptrElement.style[_el.cssProp] = '0px';\n      _el.onDistance({ dist: 0, ptrElement: _el.ptrElement, distThreshold: _el.distThreshold });\n\n      _shared.state = 'pending';\n    }\n\n    _ptr.update(_el);\n\n    _el.ptrElement.classList.remove(`${_el.classPrefix}release`);\n    // _el.ptrElement.classList.remove(`${_el.classPrefix}pull`);\n\n    _shared.pullStartY = _shared.pullMoveY = null;\n    _shared.dist = _shared.distResisted = 0;\n  }\n\n  function _onScroll() {\n    if (_el) {\n      _el.mainElement.classList.toggle(`${_el.classPrefix}top`, _el.shouldPullToRefresh());\n    }\n  }\n\n  const _passiveSettings = _shared.supportsPassive\n    ? { passive: _shared.passive || false }\n    : undefined;\n\n  if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n    window.addEventListener('pointerup', _onTouchEnd);\n    window.addEventListener('pointerdown', _onTouchStart);\n    window.addEventListener('pointermove', _onTouchMove, _passiveSettings);\n  } else {\n    window.addEventListener('touchend', _onTouchEnd);\n    window.addEventListener('touchstart', _onTouchStart);\n    window.addEventListener('touchmove', _onTouchMove, _passiveSettings);\n  }\n\n  window.addEventListener('scroll', _onScroll);\n\n  return {\n    onTouchEnd: _onTouchEnd,\n    onTouchStart: _onTouchStart,\n    onTouchMove: _onTouchMove,\n    onScroll: _onScroll,\n\n    destroy() {\n      if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n        window.removeEventListener('pointerdown', _onTouchStart);\n        window.removeEventListener('pointerup', _onTouchEnd);\n        window.removeEventListener('pointermove', _onTouchMove, _passiveSettings);\n      } else {\n        window.removeEventListener('touchstart', _onTouchStart);\n        window.removeEventListener('touchend', _onTouchEnd);\n        window.removeEventListener('touchmove', _onTouchMove, _passiveSettings);\n      }\n\n      window.removeEventListener('scroll', _onScroll);\n    },\n  };\n};\n","import _shared from './shared';\n\nfunction setupDOM(handler) {\n  if (!handler.ptrElement) {\n    const ptr = document.createElement('div');\n\n    if (handler.mainElement !== document.body) {\n      handler.mainElement.parentNode.insertBefore(ptr, handler.mainElement);\n    } else {\n      document.body.insertBefore(ptr, document.body.firstChild);\n    }\n\n    ptr.classList.add(`${handler.classPrefix}ptr`);\n    ptr.innerHTML = handler.getMarkup()\n      .replace(/__PREFIX__/g, handler.classPrefix);\n\n    handler.ptrElement = ptr;\n\n    if (typeof handler.onInit === 'function') {\n      handler.onInit(handler);\n    }\n\n    // Add the css styles to the style node, and then\n    // insert it into the dom\n    if (!_shared.styleEl) {\n      _shared.styleEl = document.createElement('style');\n      _shared.styleEl.setAttribute('id', 'pull-to-refresh-js-style');\n\n      document.head.appendChild(_shared.styleEl);\n    }\n\n    _shared.styleEl.textContent = handler.getStyles()\n      .replace(/__PREFIX__/g, handler.classPrefix)\n      .replace(/\\s+/g, ' ');\n  }\n\n  return handler;\n}\n\nfunction onReset(handler) {\n  if (!handler.ptrElement) return;\n\n  handler.ptrElement.classList.remove(`${handler.classPrefix}refresh`);\n  handler.ptrElement.style[handler.cssProp] = '0px';\n  handler.onDistance({ dist: 0, ptrElement: handler.ptrElement, distThreshold: handler.distThreshold });\n\n  setTimeout(() => {\n    // reset state\n    _shared.state = 'pending';\n  }, handler.refreshTimeout);\n}\n\nfunction update(handler) {\n  const iconEl = handler.ptrElement.querySelector(`.${handler.classPrefix}icon`);\n  const textEl = handler.ptrElement.querySelector(`.${handler.classPrefix}text`);\n\n  if (iconEl) {\n    if (_shared.state === 'refreshing') {\n      iconEl.innerHTML = handler.iconRefreshing;\n    } else {\n      iconEl.innerHTML = handler.iconArrow;\n    }\n  }\n\n  if (textEl) {\n    if (_shared.state === 'releasing') {\n      textEl.innerHTML = handler.instructionsReleaseToRefresh;\n    }\n\n    if (_shared.state === 'pulling' || _shared.state === 'pending') {\n      textEl.innerHTML = handler.instructionsPullToRefresh;\n    }\n\n    if (_shared.state === 'refreshing') {\n      textEl.innerHTML = handler.instructionsRefreshing;\n    }\n  }\n}\n\nexport default {\n  setupDOM,\n  onReset,\n  update,\n};\n","import _ptrMarkup from './markup';\nimport _ptrStyles from './styles';\n\nexport default {\n  distThreshold: 60,\n  distReload: 50,\n  distIgnore: 0,\n  mainElement: 'body',\n  triggerElement: 'body',\n  ptrElement: '.ptr',\n  classPrefix: 'ptr--',\n  cssProp: 'min-height',\n  iconArrow: '&#8675;',\n  iconRefreshing: '&hellip;',\n  instructionsPullToRefresh: 'Pull down to refresh',\n  instructionsReleaseToRefresh: 'Release to refresh',\n  instructionsRefreshing: 'Refreshing',\n  refreshTimeout: 500,\n  onDistance: () => {},\n  getMarkup: () => _ptrMarkup,\n  getStyles: () => _ptrStyles,\n  onInit: () => {},\n  onRefresh: () => location.reload(),\n  distanceResistedFunction: ({ distExtra, distThreshold }) => Math.min(1, (distExtra / distThreshold) / 2.5) * distExtra,\n  onReleasingWhilePulling: () => {},\n  shouldPullToRefresh: () => !window.scrollY,\n};\n","export default `\n<div class=\"__PREFIX__box\">\n  <div class=\"__PREFIX__content\">\n    <div class=\"__PREFIX__icon\"></div>\n    <div class=\"__PREFIX__text\"></div>\n  </div>\n</div>\n`;\n","export default `\n.__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n\n.__PREFIX__pull {\n  transition: none;\n}\n\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n\n/*\nWhen at the top of the page, disable vertical overscroll so passive touch\nlisteners can take over.\n*/\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}\n`;\n","import _setupEvents from './events';\nimport _defaults from './defaults';\nimport _shared from './shared';\n\nconst _methods = ['mainElement', 'ptrElement', 'triggerElement'];\n\nexport default options => {\n  const _handler = {};\n\n  // merge options with defaults\n  Object.keys(_defaults).forEach(key => {\n    _handler[key] = options[key] || _defaults[key];\n  });\n\n  // normalize timeout value, even if it is zero\n  _handler.refreshTimeout = typeof options.refreshTimeout === 'number'\n    ? options.refreshTimeout\n    : _defaults.refreshTimeout;\n  // normalize distReload value, even if it is zero\n  _handler.distReload = typeof options.distReload === 'number'\n    ? options.distReload\n    : _defaults.distReload;\n\n  // normalize elements\n  _methods.forEach(method => {\n    if (typeof _handler[method] === 'string') {\n      _handler[method] = document.querySelector(_handler[method]);\n    }\n  });\n\n  // attach events lazily\n  if (!_shared.events) {\n    _shared.events = _setupEvents();\n  }\n\n  _handler.contains = target => {\n    return _handler.triggerElement.contains(target);\n  };\n\n  _handler.destroy = () => {\n    // stop pending any pending callbacks\n    clearTimeout(_shared.timeout);\n\n    // remove PTR element if it exists\n    if (_handler.ptrElement && _handler.ptrElement.parentNode) {\n      _handler.ptrElement.parentNode.removeChild(_handler.ptrElement);\n      _handler.ptrElement = null;\n    }\n\n    // remove handler from shared state\n    const offset = _shared.handlers.indexOf(_handler);\n    _shared.handlers.splice(offset, 1);\n  };\n\n  return _handler;\n};\n","import _ptr from './api';\nimport _shared from './shared';\nimport _setupEvents from './events';\nimport _setupHandler from './setup';\n\n// public API\nexport default {\n  setPassiveMode(isPassive) {\n    _shared.passive = isPassive;\n  },\n  setPointerEventsMode(isEnabled) {\n    _shared.pointerEventsEnabled = isEnabled;\n  },\n  destroyAll() {\n    if (_shared.events) {\n      _shared.events.destroy();\n      _shared.events = null;\n    }\n\n    _shared.handlers.forEach(h => {\n      h.destroy();\n    });\n  },\n  init(options = {}) {\n    const handler = _setupHandler(options);\n\n    _shared.handlers.push(handler);\n\n    // Setup DOM immediately so PTR element exists before pulling starts\n    _ptr.setupDOM(handler);\n\n    return handler;\n  },\n\n  // export utils for testing\n  _: {\n    setupHandler: _setupHandler,\n    setupEvents: _setupEvents,\n    setupDOM: _ptr.setupDOM,\n    onReset: _ptr.onReset,\n    update: _ptr.update,\n  },\n};\n"],"names":["const","_shared","pullStartY","pullMoveY","handlers","styleEl","events","dist","state","timeout","distResisted","supportsPassive","supportsPointerEvents","window","PointerEvent","addEventListener","passive","e","_timeout","handler","ptrElement","ptr","document","createElement","mainElement","body","parentNode","insertBefore","firstChild","classList","add","innerHTML","getMarkup","replace","classPrefix","onInit","setAttribute","head","appendChild","textContent","getStyles","remove","style","cssProp","onDistance","distThreshold","setTimeout","refreshTimeout","iconEl","querySelector","textEl","iconRefreshing","iconArrow","instructionsReleaseToRefresh","instructionsPullToRefresh","instructionsRefreshing","screenY","event","pointerEventsEnabled","touches","let","_el","_onTouchStart","target","filter","h","contains","enable","_ptr","setupDOM","shouldPullToRefresh","clearTimeout","update","_onTouchMove","distExtra","distIgnore","cancelable","preventDefault","distanceResistedFunction","onReleasingWhilePulling","_onTouchEnd","onReset","offsetHeight","distReload","retval","onRefresh","then","length","_onScroll","toggle","_passiveSettings","undefined","onTouchEnd","onTouchStart","onTouchMove","onScroll","destroy","removeEventListener","triggerElement","location","reload","Math","min","scrollY","_methods","options","_handler","Object","keys","_defaults","forEach","key","method","_setupEvents","removeChild","offset","indexOf","splice","setPassiveMode","isPassive","setPointerEventsMode","isEnabled","destroyAll","init","_setupHandler","push","_","setupHandler","setupEvents"],"mappings":"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"}